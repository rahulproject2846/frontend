(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{141:function(e,s,t){},142:function(e,s,t){},143:function(e,s,t){"use strict";t.r(s);var a=t(3),c=t(2),n=t(17),r=t.n(n),i=(t(83),t(25)),l=t(7),d=t(23),j=t(11),o=t(5),m=t(15),b=t(73),u=t.n(b).a.create({baseURL:"http://localhost:5000",withCredentials:!0}),O="REGISTER_FAIL",h="REGISTER_SUCCESS",g="SUCCESS_MESSAGE_CLEAR",x="ERROR_CLEAR",f="USER_LOGIN_FAIL",v="USER_LOGIN_SUCCESS",p=t(10),N=t(24),y=t(29),S=t.p+"static/media/login.3ddd5f8e.mp3",E=t(1),_=function(e){var s=e.history,t=Object(y.a)(S),n=Object(j.a)(t,1)[0],r=Object(N.d)(),l=Object(p.c)((function(e){return e.auth})),b=(l.loading,l.successMessage),O=l.error,h=l.authenticate,_=(l.myInfo,Object(p.b)()),I=Object(c.useState)({email:"",password:""}),w=Object(j.a)(I,2),C=w[0],k=w[1],M=function(e){k(Object(a.a)(Object(a.a)({},C),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(c.useEffect)((function(){h&&s.push("/"),b&&(r.success(b),_({type:g})),O&&(O.map((function(e){return r.error(e)})),_({type:x}))}),[b,O]),Object(E.jsx)("div",{className:"login",children:Object(E.jsxs)("div",{className:"card",children:[Object(E.jsx)("div",{className:"card-header",children:Object(E.jsx)("h3",{children:"Login"})}),Object(E.jsx)("div",{className:"card-body",children:Object(E.jsxs)("form",{onSubmit:function(e){var s;e.preventDefault(),_((s=C,function(){var e=Object(m.a)(Object(o.a)().mark((function e(t){var a,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,u.post("/api/messenger/user-login",s,a);case 4:c=e.sent,localStorage.setItem("authToken",c.data.token),t({type:v,payload:{successMessage:c.data.successMessage,token:c.data.token}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:f,payload:{error:e.t0.response.data.error.errorMessage}});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(s){return e.apply(this,arguments)}}())),n()},children:[Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{htmlFor:"email",children:"Email"}),Object(E.jsx)("input",{onChange:M,value:C.email,type:"email",placeholder:"email",name:"email",id:"email",className:"form-control"})]}),Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{htmlFor:"password",children:"Password"}),Object(E.jsx)("input",{onChange:M,value:C.password,type:"password",name:"password",id:"password",placeholder:"password",className:"form-control"})]}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsx)("input",{type:"submit",value:"Login",className:"btn"})}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsx)("span",{children:Object(E.jsx)(i.b,{to:"/MESSENGER/Register",children:"Register Your Account"})})})]})})]})})},I=function(e){var s=e.history,t=Object(N.d)(),n=Object(p.c)((function(e){return e.auth})),r=(n.loading,n.successMessage),l=n.error,b=n.authenticate,f=(n.myInfo,Object(p.b)()),v=Object(c.useState)({userName:"",email:"",password:"",confirmPassword:"",image:""}),y=Object(j.a)(v,2),S=y[0],_=y[1],I=Object(c.useState)(""),w=Object(j.a)(I,2),C=w[0],k=w[1],M=function(e){_(Object(a.a)(Object(a.a)({},S),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(c.useEffect)((function(){b&&s.push("/"),r&&(t.success(r),f({type:g})),l&&(l.map((function(e){return t.error(e)})),f({type:x}))}),[r,l]),Object(E.jsx)("div",{className:"register",children:Object(E.jsxs)("div",{className:"card",children:[Object(E.jsx)("div",{className:"card-header",children:Object(E.jsx)("h3",{children:"Register"})}),Object(E.jsx)("div",{className:"card-body",children:Object(E.jsxs)("form",{onSubmit:function(e){var s=S.userName,t=S.email,a=S.password,c=S.image,n=S.confirmPassword;e.preventDefault();var r,i=new FormData;i.append("userName",s),i.append("email",t),i.append("password",a),i.append("confirmPassword",n),i.append("image",c),f((r=i,function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){var t,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"Content-Type":"application/josn"}},e.prev=1,e.next=4,u.post("/api/messenger/user-register",r,t);case 4:a=e.sent,localStorage.setItem("authToken",a.data.token),s({type:h,payload:{successMessage:a.data.successMessage,token:a.data.token}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:O,payload:{error:e.t0.response.data.error.errorMessage}});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(s){return e.apply(this,arguments)}}()))},children:[Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{htmlFor:"username",children:"User Name"}),Object(E.jsx)("input",{type:"text",onChange:M,name:"userName",value:S.userName,className:"form-control",placeholder:"user name",id:"username"})]}),Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{htmlFor:"email",children:"Email"}),Object(E.jsx)("input",{type:"email",onChange:M,name:"email",value:S.email,className:"form-control",placeholder:"email",id:"email"})]}),Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{htmlFor:"password",children:"Password"}),Object(E.jsx)("input",{type:"password",onChange:M,name:"password",value:S.password,className:"form-control",placeholder:"password",id:"password"})]}),Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),Object(E.jsx)("input",{type:"Password",onChange:M,name:"confirmPassword",value:S.confirmPassword,className:"form-control",placeholder:"confirm password",id:"confirmPassword"})]}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsxs)("div",{className:"file-image",children:[Object(E.jsx)("div",{className:"image",children:C?Object(E.jsx)("img",{alt:"Blank",src:C}):""}),Object(E.jsxs)("div",{className:"file",children:[Object(E.jsx)("label",{htmlFor:"image",children:"Select Image"}),Object(E.jsx)("input",{type:"file",onChange:function(e){0!==e.target.files.length&&_(Object(a.a)(Object(a.a)({},S),{},Object(d.a)({},e.target.name,e.target.files[0])));var s=new FileReader;s.onload=function(){k(s.result)},s.readAsDataURL(e.target.files[0])},name:"image",className:"form-control",id:"image"})]})]})}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsx)("input",{type:"submit",value:"register",className:"btn"})}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsx)("span",{children:Object(E.jsx)(i.b,{to:"/messenger/login",children:"Login Your Account"})})})]})})]})})},w=t(156),C=t(151),k=t(150),M=t(149),A=t(13),F=t.n(A),D=t(147),R=t(148),T=function(e){var s=e.friend,t=s.fndInfo,a=s.msgInfo,c=e.myId,n=e.activeUser;return Object(E.jsx)("div",{className:"friend",children:Object(E.jsxs)("label",{htmlFor:"friendCheckbox",children:[Object(E.jsx)("div",{className:"friend-image",children:Object(E.jsxs)("div",{className:"image",children:[Object(E.jsx)("img",{src:t.image,alt:""}),n&&n.length>0&&n.some((function(e){return e.userId===t._id}))?Object(E.jsx)("div",{className:"active_icon"}):""]})}),Object(E.jsxs)("div",{className:"friend-name-seen",children:[Object(E.jsxs)("div",{className:"friend-name",children:[Object(E.jsx)("h4",{className:(null===a||void 0===a?void 0:a.senderId)!==c&&void 0!==(null===a||void 0===a?void 0:a.status)&&"seen"!==(null===a||void 0===a?void 0:a.status)?"unseen_message Fd_name":"Fd_name",children:t.userName}),Object(E.jsxs)("div",{className:"msg-time",children:[a&&a.senderId===c?Object(E.jsx)("span",{children:"You "}):Object(E.jsxs)("span",{className:(null===a||void 0===a?void 0:a.senderId)!==c&&void 0!==(null===a||void 0===a?void 0:a.status)&&"seen"!==(null===a||void 0===a?void 0:a.status)?"unseen_message":"",children:[t.userName+""," "]}),a&&a.message.text?Object(E.jsxs)("span",{className:(null===a||void 0===a?void 0:a.senderId)!==c&&void 0!==(null===a||void 0===a?void 0:a.status)&&"seen"!==(null===a||void 0===a?void 0:a.status)?"unseen_message":"",children:[a.message.text.slice(0,10),". "]}):a&&a.message.image?Object(E.jsx)("span",{children:" send a image. "}):Object(E.jsx)("span",{children:" Registered "}),Object(E.jsx)("span",{children:a?F()(a.createdAt).startOf("mini").fromNow():F()(t.createdAt).startOf("mini").fromNow()})]})]}),c===(null===a||void 0===a?void 0:a.senderId)?Object(E.jsx)("div",{className:"seen-unseen-icon",children:"seen"===a.status?Object(E.jsx)("img",{src:t.image,alt:""}):"delivared"===a.status?Object(E.jsx)("div",{className:"delivared",children:Object(E.jsx)(D.a,{})}):Object(E.jsx)("div",{className:"unseen",children:Object(E.jsx)(R.a,{})})}):Object(E.jsx)("div",{className:"seen-unseen-icon",children:void 0!==(null===a||void 0===a?void 0:a.status)&&"seen"!==(null===a||void 0===a?void 0:a.status)?Object(E.jsx)("div",{className:"seen-icon"}):""})]})]})})},U=t(153),L=function(e){var s=e.currentfriend,t=e.activeUser,a=e.message;return Object(E.jsxs)("div",{className:"friend-info",children:[Object(E.jsx)("input",{type:"checkbox",id:"gallery"}),Object(E.jsxs)("div",{className:"image-name",children:[Object(E.jsx)("div",{className:"image",children:Object(E.jsx)("img",{src:s.image,alt:""})}),Object(E.jsx)("div",{className:"name",children:Object(E.jsx)("h4",{children:s.userName})}),t&&t.length>0&&t.some((function(e){return e.userId===s._id}))?Object(E.jsx)("div",{className:"active-user",children:" Active "}):Object(E.jsx)("div",{className:"active-user",children:" Offline "})]}),Object(E.jsxs)("div",{className:"others",children:[Object(E.jsx)("input",{type:"checkbox",id:"searchMessage"}),Object(E.jsx)("input",{type:"checkbox",id:"fDetils"}),Object(E.jsxs)("div",{className:"custom-chat",children:[Object(E.jsx)("label",{htmlFor:"fDetils",children:Object(E.jsx)("h3",{children:"Friend Detils "})}),Object(E.jsx)("label",{className:"arrowDown",htmlFor:"fDetils",children:Object(E.jsx)(M.b,{})})]}),Object(E.jsx)("div",{className:"dropDownFndInfo",children:Object(E.jsxs)("div",{className:"fDetils",children:[Object(E.jsxs)("div",{className:"fndDetils",children:["User Name : ",s.userName]})," ",Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"fndDetils",children:["Email : ",s.email]})," ",Object(E.jsx)("br",{}),Object(E.jsxs)("div",{className:"fndDetils",children:["Registered : ",F()(s.createdAt).startOf("mini").fromNow()]})]})}),Object(E.jsxs)("div",{className:"privacy",children:[Object(E.jsx)("label",{htmlFor:"searchMessage",children:Object(E.jsx)("h3",{children:"Search Message "})}),Object(E.jsx)("label",{className:"arrowDown",htmlFor:"searchMessage",children:Object(E.jsx)(M.b,{})})]}),Object(E.jsx)("div",{className:"searchMessage",children:Object(E.jsxs)("div",{className:"search",children:[Object(E.jsx)("button",{children:Object(E.jsx)(k.a,{})}),Object(E.jsx)("input",{onChange:function(e){for(var s=document.getElementsByClassName("my-message"),t=document.getElementsByClassName("my-text"),a=0;s.length,a<t.length;a++){t[a].innerText.toLowerCase().indexOf(e.target.value.toLowerCase())>-1?s[a].style.display="":s[a].style.display="none"}var c=document.getElementsByClassName("fd-message"),n=document.getElementsByClassName("fd-text");for(a=0;c.length,a<n.length;a++){n[a].innerText.toLowerCase().indexOf(e.target.value.toLowerCase())>-1?c[a].style.display="":c[a].style.display="none"}},type:"text",placeholder:"search",className:"form-control"})]})}),Object(E.jsxs)("div",{className:"media",children:[Object(E.jsx)("label",{htmlFor:"gallery",children:Object(E.jsx)("h3",{children:"Shared Media "})}),Object(E.jsx)("label",{className:"arrowDown",htmlFor:"gallery",children:Object(E.jsx)(M.b,{})})]})]}),Object(E.jsx)("div",{className:"conversationImage",children:Object(E.jsx)("div",{className:"gallery",children:a&&a.length>0?a.map((function(e,s){return e.message.image&&Object(E.jsx)("img",{src:e.message.image,alt:""},s)})):""})})]})},G=function(e){var s=e.message,t=e.currentfriend,a=e.scrollRef,c=e.typingMessage,n=Object(p.c)((function(e){return e.auth})).myInfo;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"message-show",children:s&&s.length>0?s.map((function(e,c){return e.senderId===n.id?Object(E.jsxs)("div",{ref:a,className:"my-message",children:[Object(E.jsx)("div",{className:"image-message",children:Object(E.jsxs)("div",{className:"my-text",children:[Object(E.jsx)("p",{className:"message-text my",children:""===e.message.text?Object(E.jsx)("img",{src:e.message.image,alt:"image"}):e.message.text}),c===s.length-1&&e.senderId===n.id?"seen"===e.status?Object(E.jsx)("img",{className:"img",src:t.image,alt:""}):"delivared"===e.status?Object(E.jsx)("span",{children:Object(E.jsx)(D.a,{})}):Object(E.jsx)("span",{children:Object(E.jsx)(R.a,{})}):""]})}),Object(E.jsx)("div",{className:"time",children:F()(e.createdAt).startOf("mini").fromNow()})]},c):Object(E.jsx)("div",{ref:a,className:"fd-message",children:Object(E.jsxs)("div",{className:"image-message-time",children:[Object(E.jsx)("img",{src:t.image,alt:""}),Object(E.jsxs)("div",{className:"message-time",children:[Object(E.jsx)("div",{className:"fd-text",children:Object(E.jsx)("p",{className:"message-text fd",children:""===e.message.text?Object(E.jsx)("img",{src:e.message.image,alt:"image"}):e.message.text})}),Object(E.jsx)("div",{className:"time",children:F()(e.createdAt).startOf("mini").fromNow()})]})]})},c)})):Object(E.jsxs)("div",{className:"friend_connect",children:[Object(E.jsx)("img",{src:t.image,alt:""}),Object(E.jsxs)("h3",{children:[t.userName," Connected You"]}),Object(E.jsx)("span",{children:F()(t.createdAt).startOf("mini").fromNow()})]})}),c&&c.msg&&c.senderId===t._id?Object(E.jsx)("div",{className:"typing-message",children:Object(E.jsx)("div",{className:"fd-message",children:Object(E.jsxs)("div",{className:"image-message-time",children:[Object(E.jsx)("img",{src:t.image,alt:""}),Object(E.jsx)("div",{className:"message-time",children:Object(E.jsx)("div",{className:"fd-text",children:Object(E.jsx)("p",{className:"message-text",children:Object(E.jsxs)("div",{id:"wave",children:[Object(E.jsxs)("span",{class:"srfriendzone",children:[" ",t.userName," is typing "]}),Object(E.jsx)("span",{class:"dot one"}),Object(E.jsx)("span",{class:"dot two"}),Object(E.jsx)("span",{class:"dot three"})]})})})})]})})}):""]})},P=t(152),B=function(e){var s=e.inputHendle,t=e.newMessage,a=e.sendMessage,c=e.emojiSend,n=e.ImageSend;return Object(E.jsxs)("div",{className:"message-send-section",children:[Object(E.jsx)("input",{type:"checkbox",id:"emoji"}),Object(E.jsxs)("div",{className:"file hover-attachment",children:[Object(E.jsx)("div",{className:"add-attachment",children:"Add Attachment"}),Object(E.jsx)("input",{onChange:n,type:"file",id:"pic",className:"form-control"}),Object(E.jsx)("label",{htmlFor:"pic",children:Object(E.jsx)(M.f,{})})]}),Object(E.jsxs)("div",{className:"file hover-image",children:[Object(E.jsx)("div",{className:"add-image",children:"Add Image"}),Object(E.jsx)("input",{onChange:n,type:"file",id:"pic",className:"form-control"}),Object(E.jsx)("label",{htmlFor:"pic",children:Object(E.jsx)(D.b,{})})]}),Object(E.jsxs)("div",{className:"message-type",children:[Object(E.jsx)("input",{onChange:s,type:"text",name:"message",id:"message",placeholder:"Aa",value:t,className:"form-control"}),Object(E.jsx)("label",{htmlFor:"emoji",children:"\ud83d\ude42"})]}),Object(E.jsx)("div",{onClick:a,className:"file sentOrLike",children:Object(E.jsx)("label",{className:"sentOrLikeO",children:t?Object(E.jsx)(C.c,{}):Object(E.jsx)(P.a,{})})}),Object(E.jsx)("div",{className:"emoji-section",children:Object(E.jsx)("div",{className:"emoji",children:["\ud83d\ude00","\ud83d\ude03","\ud83d\ude04","\ud83d\ude01","\ud83d\ude06","\ud83d\ude05","\ud83d\ude02","\ud83e\udd23","\ud83d\ude0a","\ud83d\ude07","\ud83d\ude42","\ud83d\ude43","\ud83d\ude09","\ud83d\ude0c","\ud83d\ude0d","\ud83d\ude1d","\ud83d\ude1c","\ud83e\uddd0","\ud83e\udd13","\ud83d\ude0e","\ud83d\ude15","\ud83e\udd11","\ud83e\udd74","\ud83d\ude31","\ud83d\udc4b","\ud83c\udf89","\ud83d\udcda","\u2764\ufe0f"].map((function(e,s){return Object(E.jsx)("span",{onClick:function(){return c(e)},children:e},s)}))})})]})},H=function(e){var s=e.currentfriend,t=e.inputHendle,a=e.newMessage,c=e.sendMessage,n=e.message,r=e.scrollRef,i=e.emojiSend,l=e.ImageSend,d=e.activeUser,j=e.typingMessage;return Object(E.jsx)("div",{className:"col-9",children:Object(E.jsxs)("div",{className:"right-side",children:[Object(E.jsx)("input",{type:"checkbox",id:"dot"}),Object(E.jsxs)("div",{className:"row",children:[Object(E.jsx)("div",{className:"col-8",children:Object(E.jsxs)("div",{className:"message-send-show",children:[Object(E.jsxs)("div",{className:"header",children:[Object(E.jsx)("label",{className:"backBtn",htmlFor:"friendCheckbox",children:Object(E.jsx)("div",{className:"backIcon",children:Object(E.jsx)(U.a,{})})}),Object(E.jsx)("label",{htmlFor:"dot",children:Object(E.jsxs)("div",{className:"image-name",children:[Object(E.jsxs)("div",{className:"image",children:[Object(E.jsx)("img",{src:s.image,alt:""}),d&&d.length>0&&d.some((function(e){return e.userId===s._id}))?Object(E.jsx)("div",{className:"active-icon"}):""]}),Object(E.jsxs)("div",{className:"name",children:[Object(E.jsxs)("h3",{children:[" ",s.userName," "]}),Object(E.jsx)("span",{children:d&&d.length>0&&d.some((function(e){return e.userId===s._id}))?"Active now":"Offline"})]})]})}),Object(E.jsxs)("div",{className:"icons",children:[Object(E.jsx)("div",{className:"icon hide",children:Object(E.jsx)(C.a,{})}),Object(E.jsx)("div",{className:"icon hide",children:Object(E.jsx)(M.a,{})}),Object(E.jsx)("div",{className:"icon",children:Object(E.jsx)("label",{htmlFor:"dot",children:Object(E.jsx)("div",{className:"hamburger",children:Object(E.jsxs)("div",{className:"menu",children:[Object(E.jsx)("div",{className:"bar1"}),Object(E.jsx)("div",{className:"bar2"}),Object(E.jsx)("div",{className:"bar3"})]})})})})]})]}),Object(E.jsx)(G,{currentfriend:s,scrollRef:r,message:n,typingMessage:j}),Object(E.jsx)(B,{ImageSend:l,emojiSend:i,sendMessage:c,inputHendle:t,newMessage:a,typingMessage:j})]})}),Object(E.jsx)("div",{className:"col-4",children:Object(E.jsx)(L,{message:n,currentfriend:s,activeUser:d})})]})]})})},V=t(75),W=t(47),Y="FRIENDS_GET_SUCCESS",z="MESSAGE_GET_SUCCESS",J="MESSAGE_SEND_SUCCESS",K=function(e){return function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u.post("/api/messenger/seen-message",e);case 3:s.sent,s.next=9;break;case 6:s.prev=6,s.t0=s.catch(0),console.log(s.t0.response.message);case 9:case"end":return s.stop()}}),s,null,[[0,6]])})));return function(e){return s.apply(this,arguments)}}()},q=function(e){return function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:localStorage.setItem("theme",e),t({type:"THEME_SET_SUCCESS",payload:{theme:e}});case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},Q=t.p+"static/media/notification.a9597953.mp3",X=t.p+"static/media/sending.aca82518.mp3",Z=t.p+"static/media/logout.52f04a7e.mp3",$=function(e){var s=e.user,t=e.setCurrentFriend;return Object(E.jsx)("div",{children:Object(E.jsx)("div",{onClick:function(){return t({_id:s.userInfo.id,email:s.userInfo.email,image:s.userInfo.image,userName:s.userInfo.userName})},className:"active-friend",children:Object(E.jsxs)("label",{htmlFor:"friendCheckbox",children:[Object(E.jsx)("div",{className:"image-active-icon",children:Object(E.jsxs)("div",{className:"image",children:[Object(E.jsx)("img",{src:s.userInfo.image,alt:""}),Object(E.jsx)("div",{className:"active-icon"})]})}),Object(E.jsx)("p",{children:s.userInfo.userName})]})})})},ee=t(154),se=t(155),te=function(e){var s=e.currentfriend;return Object(E.jsxs)("div",{className:"call-friend",children:[Object(E.jsx)("span",{className:"recents",children:" Recents "}),Object(E.jsxs)("label",{htmlFor:"/",children:[" ",Object(E.jsx)("div",{className:"image-call-icon",children:Object(E.jsx)("div",{className:"image",children:Object(E.jsx)("img",{src:s.image,alt:""})})}),Object(E.jsxs)("div",{className:"call-detils-conversation",children:[Object(E.jsxs)("div",{className:"call-detils",children:[Object(E.jsx)("h4",{children:s.userName}),Object(E.jsxs)("div",{className:"call-time",children:[Object(E.jsxs)("span",{children:[" ",Object(E.jsx)(ee.a,{})," Incoming. "]}),Object(E.jsxs)("span",{children:[" ",F()(s.createdAt).startOf("mini").fromNow()," "]})]})]}),Object(E.jsx)("div",{className:"conversation",children:Object(E.jsx)(se.a,{})})]})]}),Object(E.jsxs)("label",{htmlFor:"/",children:[" ",Object(E.jsx)("div",{className:"image-call-icon",children:Object(E.jsx)("div",{className:"image",children:Object(E.jsx)("img",{src:s.image,alt:""})})}),Object(E.jsxs)("div",{className:"call-detils-conversation",children:[Object(E.jsxs)("div",{className:"call-detils",children:[Object(E.jsx)("h4",{children:s.userName}),Object(E.jsxs)("div",{className:"call-time",children:[Object(E.jsxs)("span",{children:[" ",Object(E.jsx)(ee.c,{})," Outgoing. "]}),Object(E.jsxs)("span",{children:[" ",F()(s.createdAt).startOf("mini").fromNow()," "]})]})]}),Object(E.jsx)("div",{className:"conversation",children:Object(E.jsx)(se.a,{})})]})]}),Object(E.jsxs)("label",{htmlFor:"/",children:[" ",Object(E.jsx)("div",{className:"image-call-icon",children:Object(E.jsx)("div",{className:"image",children:Object(E.jsx)("img",{src:s.image,alt:""})})}),Object(E.jsxs)("div",{className:"call-detils-conversation",children:[Object(E.jsxs)("div",{className:"call-detils",children:[Object(E.jsx)("h4",{children:s.userName}),Object(E.jsxs)("div",{className:"call-time",children:[Object(E.jsxs)("span",{className:"missed",children:[" ",Object(E.jsx)(ee.b,{})," Missed. "]}),Object(E.jsxs)("span",{children:[" ",F()(s.createdAt).startOf("mini").fromNow()," "]})]})]}),Object(E.jsx)("div",{className:"conversation",children:Object(E.jsx)(se.a,{})})]})]})]})},ae=function(){var e=Object(y.a)(Q),s=Object(j.a)(e,1)[0],t=Object(y.a)(X),a=Object(j.a)(t,1)[0],n=Object(y.a)(Z),r=Object(j.a)(n,1)[0],i=Object(p.c)((function(e){return e.auth})).myInfo,l=Object(p.c)((function(e){return e.messenger})),d=l.friends,b=l.message,O=l.messageSendSuccess,h=l.message_get_success,g=l.themeMood,x=l.new_user_add,f=Object(c.useState)(""),v=Object(j.a)(f,2),N=v[0],S=v[1],_=Object(c.useState)(""),I=Object(j.a)(_,2),A=I[0],F=I[1],D=Object(c.useState)(""),R=Object(j.a)(D,2),U=R[0],L=R[1],G=Object(c.useState)(""),P=Object(j.a)(G,2),B=P[0],ee=P[1],se=Object(c.useState)([]),ae=Object(j.a)(se,2),ce=ae[0],ne=ae[1],re=Object(c.useRef)(),ie=Object(c.useRef)();Object(c.useEffect)((function(){ie.current=Object(V.io)("/"),ie.current.on("getMessage",(function(e){L(e)})),ie.current.on("typingMessageGet",(function(e){ee(e)})),ie.current.on("msgSeenResponse",(function(e){le({type:"SEEN_MESSAGE",payload:{msgInfo:e}})})),ie.current.on("msgDelivaredResponse",(function(e){le({type:"DELIVARED_MESSAGE",payload:{msgInfo:e}})})),ie.current.on("seenSuccess",(function(e){le({type:"SEEN_ALL",payload:e})}))}),[]),Object(c.useEffect)((function(){ie.current.emit("addUser",i.id,i)}),[]),Object(c.useEffect)((function(){ie.current.on("getUser",(function(e){var s=e.filter((function(e){return e.userId!==i.id}));ne(s)})),ie.current.on("new_user_add",(function(e){le({type:"NEW_USER_ADD",payload:{new_user_add:e}})}))}),[]),Object(c.useEffect)((function(){U&&N&&U.senderId===N._id&&U.reseverId===i.id&&(le({type:"SOCKET_MESSAGE",payload:{message:U}}),le(K(U)),ie.current.emit("messageSeen",U),le({type:"UPDATE_FRIEND_MESSAGE",payload:{msgInfo:U,status:"seen"}})),L("")}),[U]),Object(c.useEffect)((function(){var e;U&&U.senderId!==N._id&&U.reseverId===i.id&&(s(),W.b.success("".concat(U.senderName," send a new message")),le((e=U,function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u.post("/api/messenger/delivared-message",e);case 3:s.sent,s.next=9;break;case 6:s.prev=6,s.t0=s.catch(0),console.log(s.t0.response.message);case 9:case"end":return s.stop()}}),s,null,[[0,6]])})));return function(e){return s.apply(this,arguments)}}())),ie.current.emit("delivaredMessage",U),le({type:"UPDATE_FRIEND_MESSAGE",payload:{msgInfo:U,status:"delivared"}}))}),[U]);var le=Object(p.b)();Object(c.useEffect)((function(){O&&(ie.current.emit("sendMessage",b[b.length-1]),le({type:"UPDATE_FRIEND_MESSAGE",payload:{msgInfo:b[b.length-1]}}),le({type:"MESSAGE_SEND_SUCCESS_CLEAR"}))}),[O]),Object(c.useEffect)((function(){le(function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.get("/api/messenger/get-friends");case 3:t=e.sent,s({type:Y,payload:{friends:t.data.friends}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(s){return e.apply(this,arguments)}}()),le({type:"NEW_USER_ADD_CLEAR"})}),[x]),Object(c.useEffect)((function(){var e;le((e=N._id,function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){var a;return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u.get("/api/messenger/get-message/".concat(e));case 3:a=s.sent,t({type:z,payload:{message:a.data.message}}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log(s.t0.response.data);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e){return s.apply(this,arguments)}}()))}),[null===N||void 0===N?void 0:N._id]),Object(c.useEffect)((function(){b.length>0&&b[b.length-1].senderId!==i.id&&"seen"!==b[b.length-1].status&&(le({type:"UPDATE",payload:{id:N._id}}),ie.current.emit("seen",{senderId:N._id,reseverId:i.id}),le(K({_id:b[b.length-1]._id}))),le({type:"MESSAGE_GET_SUCCESS_CLEAR"})}),[h]),Object(c.useEffect)((function(){var e;null===(e=re.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[b]);var de=Object(c.useState)(!0),je=Object(j.a)(de,2),oe=je[0],me=je[1];Object(c.useEffect)((function(){le(function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("theme"),s({type:"THEME_GET_SUCCESS",payload:{theme:t||"white"}});case 2:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}())}),[]);return Object(E.jsxs)("div",{className:"dark"===g?"messenger themeDark":"black"===g?"messenger themeBlack":"messenger",children:[Object(E.jsx)(W.a,{position:"top-right",reverseOrder:!1,toastOptions:{style:{fontSize:"18px"}}}),Object(E.jsx)("input",{type:"checkbox",id:"friendCheckbox"}),Object(E.jsx)("input",{type:"radio",className:"tab-toggle",name:"tab-toggle",id:"tab1",defaultChecked:!0}),Object(E.jsx)("input",{type:"radio",className:"tab-toggle",name:"tab-toggle",id:"tab2"}),Object(E.jsx)("input",{type:"radio",className:"tab-toggle",name:"tab-toggle",id:"tab3"}),Object(E.jsxs)("div",{className:"row",children:[Object(E.jsx)("div",{className:"col-3",children:Object(E.jsxs)("div",{className:"left-side",children:[Object(E.jsx)("input",{type:"checkbox",id:"showMyInfo"}),Object(E.jsxs)("div",{className:"MyInfo",children:[Object(E.jsx)("div",{className:"image",children:Object(E.jsx)("img",{src:i.image,alt:""})}),Object(E.jsxs)("div",{className:"myDetils",children:[Object(E.jsxs)("p",{children:[" ",i.userName]}),Object(E.jsxs)("p",{children:[" ",i.email.slice(0,20)]})]})]}),Object(E.jsxs)("div",{className:"top",children:[Object(E.jsxs)("label",{htmlFor:"showMyInfo",children:[Object(E.jsx)("div",{className:"chats",children:Object(E.jsx)("div",{className:"icons",children:Object(E.jsx)("div",{className:"icon",children:Object(E.jsxs)("div",{className:"menu",children:[Object(E.jsx)("div",{className:"bar1"}),Object(E.jsx)("div",{className:"bar2"}),Object(E.jsx)("div",{className:"bar3"})]})})})}),Object(E.jsxs)("div",{className:"image-name",children:[Object(E.jsx)("div",{className:"image",children:Object(E.jsx)("img",{src:i.image,alt:""})}),Object(E.jsx)("div",{className:"name",children:Object(E.jsx)("h3",{children:i.userName})}),Object(E.jsx)("span",{className:"chat-list",children:" Chats "}),Object(E.jsx)("span",{className:"call-list",children:" Calls "}),Object(E.jsx)("span",{className:"active-list",children:" People "})]})]}),Object(E.jsxs)("div",{className:"icons",children:[Object(E.jsx)("div",{className:"iconTwo",children:Object(E.jsx)("div",{onClick:function(){return me(!oe)},className:"hamburger",children:Object(E.jsx)(w.a,{})})}),Object(E.jsx)("div",{className:"iconThree",children:Object(E.jsxs)("div",{onClick:function(){le(function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.post("/api/messenger/user-logout");case 3:e.sent.data.success&&(localStorage.removeItem("authToken"),s({type:"LOGOUT_SUCCESS"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(s){return e.apply(this,arguments)}}()),ie.current.emit("logout",i.id),r()},className:"logout",children:[Object(E.jsx)(C.b,{}),Object(E.jsx)("div",{className:"logoutHover",children:"Logout"})]})}),Object(E.jsx)("div",{className:oe?"theme_logout":"theme_logout show",children:Object(E.jsxs)("div",{className:"theme_logout_body",children:[Object(E.jsx)("h3",{children:"Theme"}),Object(E.jsxs)("div",{className:"dark",children:[Object(E.jsx)("label",{htmlFor:"dark",children:" Dark "}),Object(E.jsx)("input",{onChange:function(e){return le(q(e.target.value))},value:"dark",type:"radio",name:"theme",id:"dark"})]}),Object(E.jsxs)("div",{className:"black",children:[Object(E.jsx)("label",{htmlFor:"black",children:" Black "}),Object(E.jsx)("input",{onChange:function(e){return le(q(e.target.value))},value:"black",type:"radio",name:"theme",id:"black"})]}),Object(E.jsxs)("div",{className:"light",children:[Object(E.jsx)("label",{htmlFor:"light",children:" Light "}),Object(E.jsx)("input",{onChange:function(e){return le(q(e.target.value))},value:"light",type:"radio",name:"theme",id:"light"})]})]})})]})]}),Object(E.jsxs)("div",{className:"forCallTab",children:[Object(E.jsx)("div",{className:"tabOne",children:Object(E.jsxs)("div",{className:"friends",children:[Object(E.jsx)("div",{className:"friend-search",children:Object(E.jsxs)("div",{className:"search",children:[Object(E.jsx)("button",{children:Object(E.jsx)(k.a,{})}),Object(E.jsx)("input",{onChange:function(e){for(var s=document.getElementsByClassName("hover-friend"),t=document.getElementsByClassName("Fd_name"),a=0;s.length,a<t.length;a++){t[a].innerText.toLowerCase().indexOf(e.target.value.toLowerCase())>-1?s[a].style.display="":s[a].style.display="none"}},type:"text",placeholder:"search",className:"form-control"})]})}),ce&&ce.length>0?Object(E.jsx)("div",{className:"active-friends",children:ce.map((function(e,s){return Object(E.jsx)($,{setCurrentFriend:S,user:e},s)}))}):"",d&&d.length>0?d.map((function(e,s){return Object(E.jsx)("div",{onClick:function(){return S(e.fndInfo)},className:N._id===e.fndInfo._id?"hover-friend active":"hover-friend",children:Object(E.jsx)(T,{activeUser:ce,myId:i.id,friend:e})},s)})):Object(E.jsx)("div",{className:"firstViewFriends",children:"No friend yet ... "})]})}),Object(E.jsx)("div",{className:"tabTwo",children:Object(E.jsx)(te,{currentfriend:N})}),Object(E.jsxs)("div",{className:"tabThree",children:[Object(E.jsx)("span",{className:"active-text",children:" Active now "}),Object(E.jsx)("div",{className:"friends",children:ce&&ce.length>0?Object(E.jsx)("div",{children:ce&&ce.length>0?Object(E.jsx)("div",{className:"active-friends",children:ce.map((function(e,s){return Object(E.jsx)($,{setCurrentFriend:S,user:e},s)}))}):""}):Object(E.jsx)("div",{className:"NoActiveFriend",children:"No active friend  ... "})})]})]}),Object(E.jsxs)("div",{className:"proparty",children:[Object(E.jsxs)("label",{className:"tab-trigger-one",htmlFor:"tab1",children:[Object(E.jsx)(M.d,{}),Object(E.jsx)("p",{children:"Chats"})]}),Object(E.jsxs)("label",{className:"tab-trigger-two",htmlFor:"tab2",children:[Object(E.jsx)(M.c,{}),Object(E.jsx)("p",{children:"Calls"})]}),Object(E.jsxs)("label",{className:"tab-trigger",htmlFor:"tab3",children:[Object(E.jsx)(M.e,{}),Object(E.jsx)("p",{children:"People"})]})]})]})}),N?Object(E.jsx)(H,{activeUser:ce,ImageSend:function(e){if(0!==e.target.files.length){a();var s=new FormData;s.append("senderName",i.userName),s.append("reseverId",N._id),s.append("image",e.target.files[0]),le((t=s,function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){var a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.post("/api/messenger/image-message-send",t);case 3:a=e.sent,s({type:J,payload:{message:a.data.message}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(s){return e.apply(this,arguments)}}()))}var t},currentfriend:N,inputHendle:function(e){F(e.target.value),ie.current.emit("typingMessage",{senderId:i.id,reseverId:N._id,msg:e.target.value})},newMessage:A,sendMessage:function(e){e.preventDefault(),a();var s={senderName:i.userName,reseverId:N._id,message:A||"\ud83d\udc4d"};ie.current.emit("typingMessage",{senderId:i.id,reseverId:N._id,msg:""}),le(function(e){return function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){var a;return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u.post("/api/messenger/send-message",e);case 3:a=s.sent,t({type:J,payload:{message:a.data.message}}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log(s.t0.response.data);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e){return s.apply(this,arguments)}}()}(s)),F("")},message:b,scrollRef:re,emojiSend:function(e){F("".concat(A)+e),ie.current.emit("typingMessage",{senderId:i.id,reseverId:N._id,msg:e})},typingMessage:B}):d&&d.length>0?Object(E.jsx)("div",{className:"firstView",children:"Select a chat to start messaging"}):Object(E.jsx)("div",{className:"firstViewFriend",children:"No friend yet ... "})]})]})},ce=function(e){return Object(p.c)((function(e){return e.auth})).authenticate?Object(E.jsx)(l.b,{path:e.path,component:e.component,exact:e.exact}):Object(E.jsx)(l.a,{to:"/messenger/login"})};var ne=function(){return Object(E.jsx)(i.a,{children:Object(E.jsxs)(l.d,{children:[Object(E.jsx)(l.b,{path:"/messenger/login",component:_,exact:!0}),Object(E.jsx)(l.b,{path:"/messenger/register",component:I,exact:!0}),Object(E.jsx)(ce,{path:"/",component:ae,exact:!0})]})})},re=(t(141),t(142),function(e){e&&e instanceof Function&&t.e(4).then(t.bind(null,157)).then((function(s){var t=s.getCLS,a=s.getFID,c=s.getFCP,n=s.getLCP,r=s.getTTFB;t(e),a(e),c(e),n(e),r(e)}))}),ie=t(34),le=t(76),de=t(77),je={loading:!0,authenticate:!1,error:"",successMessage:"",myInfo:""},oe=function(e){var s=Object(de.a)(e),t=new Date(1e3*s.exp);return new Date>t?null:s},me=localStorage.getItem("authToken");if(me){var be=oe(me);be&&(je.myInfo=be,je.authenticate=!0,je.loading=!1)}var ue=t(46),Oe={friends:[],message:[],messageSendSuccess:!1,message_get_success:!1,themeMood:"",new_user_add:""},he=Object(ie.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,s=arguments.length>1?arguments[1]:void 0,t=s.payload,c=s.type;if(c===O||c===f)return Object(a.a)(Object(a.a)({},e),{},{error:t.error,authenticate:!1,myInfo:"",loading:!0});if(c===h||c===v){var n=oe(t.token);return Object(a.a)(Object(a.a)({},e),{},{myInfo:n,successMessage:t.successMessage,error:"",authenticate:!0,loading:!1})}return c===g?Object(a.a)(Object(a.a)({},e),{},{successMessage:""}):c===x?Object(a.a)(Object(a.a)({},e),{},{error:""}):"LOGOUT_SUCCESS"===c?Object(a.a)(Object(a.a)({},e),{},{authenticate:!1,myInfo:"",successMessage:"Logout successfull"}):e},messenger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,s=arguments.length>1?arguments[1]:void 0,t=s.type,c=s.payload;if("THEME_GET_SUCCESS"===t||"THEME_SET_SUCCESS"===t)return Object(a.a)(Object(a.a)({},e),{},{themeMood:c.theme});if(t===Y)return Object(a.a)(Object(a.a)({},e),{},{friends:c.friends});if(t===z)return Object(a.a)(Object(a.a)({},e),{},{message_get_success:!0,message:c.message});if(t===J)return Object(a.a)(Object(a.a)({},e),{},{messageSendSuccess:!0,message:[].concat(Object(ue.a)(e.message),[c.message])});if("SOCKET_MESSAGE"===t)return Object(a.a)(Object(a.a)({},e),{},{message:[].concat(Object(ue.a)(e.message),[c.message])});if("UPDATE_FRIEND_MESSAGE"===t){var n=e.friends.findIndex((function(e){return e.fndInfo._id===c.msgInfo.reseverId||e.fndInfo._id===c.msgInfo.senderId}));return e.friends[n].msgInfo=c.msgInfo,e.friends[n].msgInfo.status=c.status,e}if("MESSAGE_SEND_SUCCESS_CLEAR"===t)return Object(a.a)(Object(a.a)({},e),{},{messageSendSuccess:!1});if("SEEN_MESSAGE"===t){var r=e.friends.findIndex((function(e){return e.fndInfo._id===c.msgInfo.reseverId||e.fndInfo._id===c.msgInfo.senderId}));return e.friends[r].msgInfo.status="seen",Object(a.a)({},e)}if("DELIVARED_MESSAGE"===t){var i=e.friends.findIndex((function(e){return e.fndInfo._id===c.msgInfo.reseverId||e.fndInfo._id===c.msgInfo.senderId}));return e.friends[i].msgInfo.status="delivared",Object(a.a)({},e)}if("UPDATE"===t){var l=e.friends.findIndex((function(e){return e.fndInfo._id===c.id}));return e.friends[l].msgInfo&&(e.friends[l].msgInfo.status="seen"),Object(a.a)({},e)}if("MESSAGE_GET_SUCCESS_CLEAR"===t)return Object(a.a)(Object(a.a)({},e),{},{message_get_success:!1});if("SEEN_ALL"===t){var d=e.friends.findIndex((function(e){return e.fndInfo._id===c.reseverId}));return e.friends[d].msgInfo.status="seen",Object(a.a)({},e)}return"LOGOUT_SUCCESS"===t?Object(a.a)(Object(a.a)({},e),{},{friends:[],message:[],messageSendSuccess:!1,message_get_success:!1}):"NEW_USER_ADD"===t?Object(a.a)(Object(a.a)({},e),{},{new_user_add:c.new_user_add}):"NEW_USER_ADD_CLEAR"===t?Object(a.a)(Object(a.a)({},e),{},{new_user_add:""}):e}}),ge=[le.a],xe=Object(ie.d)(he,Object(ie.c)(ie.a.apply(void 0,ge))),fe=t(78),ve={timeout:5e3,positions:N.b.BOTTOM_CENTER,transitions:N.c.SCALE};r.a.render(Object(E.jsx)(p.a,{store:xe,children:Object(E.jsx)(N.a,Object(a.a)(Object(a.a)({template:fe.a},ve),{},{children:Object(E.jsx)(ne,{})}))}),document.getElementById("root")),re()},83:function(e,s,t){}},[[143,1,2]]]);
//# sourceMappingURL=main.86531585.chunk.js.map