(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,s,t){},106:function(e,s,t){},107:function(e,s,t){"use strict";t.r(s);var a=t(3),c=t(2),n=t(27),r=t.n(n),i=(t(72),t(34)),l=t(7),d=t(30),j=t(17),o=t(5),m=t(21),b=t(61),u="https://backend-azure-two.vercel.app",O=t.n(b).a.create({baseURL:u,withCredentials:!0,headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}}),h="REGISTER_FAIL",g="REGISTER_SUCCESS",x="SUCCESS_MESSAGE_CLEAR",f="ERROR_CLEAR",v="USER_LOGIN_FAIL",p="USER_LOGIN_SUCCESS",N=t(15),y=t(33),S=t(39),E=t.p+"static/media/login.3ddd5f8e.mp3",_=t(1),I=function(e){var s=e.history,t=Object(S.a)(E),n=Object(j.a)(t,1)[0],r=Object(y.d)(),l=Object(N.c)((function(e){return e.auth})),b=(l.loading,l.successMessage),u=l.error,h=l.authenticate,g=(l.myInfo,Object(N.b)()),I=Object(c.useState)({email:"",password:""}),w=Object(j.a)(I,2),C=w[0],k=w[1],M=function(e){k(Object(a.a)(Object(a.a)({},C),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(c.useEffect)((function(){h&&s.push("/"),b&&(r.success(b),g({type:x})),u&&(u.map((function(e){return r.error(e)})),g({type:f}))}),[b,u]),Object(_.jsx)("div",{className:"login",children:Object(_.jsxs)("div",{className:"card",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h3",{children:"Login"})}),Object(_.jsx)("div",{className:"card-body",children:Object(_.jsxs)("form",{onSubmit:function(e){var s;e.preventDefault(),g((s=C,function(){var e=Object(m.a)(Object(o.a)().mark((function e(t){var a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/messenger/user-login",s);case 3:a=e.sent,localStorage.setItem("authToken",a.data.token),t({type:p,payload:{successMessage:a.data.successMessage,token:a.data.token}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:v,payload:{error:e.t0.response.data.error.errorMessage}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(s){return e.apply(this,arguments)}}())),n()},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"email",children:"Email"}),Object(_.jsx)("input",{onChange:M,value:C.email,type:"email",placeholder:"email",name:"email",id:"email",className:"form-control"})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"password",children:"Password"}),Object(_.jsx)("input",{onChange:M,value:C.password,type:"password",name:"password",id:"password",placeholder:"password",className:"form-control"})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("input",{type:"submit",value:"Login",className:"btn"})}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("span",{children:Object(_.jsx)(i.b,{to:"/MESSENGER/Register",children:"Register Your Account"})})})]})})]})})},w=function(e){var s=e.history,t=Object(y.d)(),n=Object(N.c)((function(e){return e.auth})),r=(n.loading,n.successMessage),l=n.error,b=n.authenticate,u=(n.myInfo,Object(N.b)()),v=Object(c.useState)({userName:"",email:"",password:"",confirmPassword:"",image:""}),p=Object(j.a)(v,2),S=p[0],E=p[1],I=Object(c.useState)(""),w=Object(j.a)(I,2),C=w[0],k=w[1],M=function(e){E(Object(a.a)(Object(a.a)({},S),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(c.useEffect)((function(){b&&s.push("/"),r&&(t.success(r),u({type:x})),l&&(l.map((function(e){return t.error(e)})),u({type:f}))}),[r,l]),Object(_.jsx)("div",{className:"register",children:Object(_.jsxs)("div",{className:"card",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h3",{children:"Register"})}),Object(_.jsx)("div",{className:"card-body",children:Object(_.jsxs)("form",{onSubmit:function(e){var s=S.userName,t=S.email,a=S.password,c=S.image,n=S.confirmPassword;e.preventDefault();var r,i=new FormData;i.append("userName",s),i.append("email",t),i.append("password",a),i.append("confirmPassword",n),i.append("image",c),u((r=i,function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/messenger/user-register",r);case 3:t=e.sent,localStorage.setItem("authToken",t.data.token),s({type:g,payload:{successMessage:t.data.successMessage,token:t.data.token}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s({type:h,payload:{error:e.t0.response.data.error.errorMessage}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(s){return e.apply(this,arguments)}}()))},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"username",children:"User Name"}),Object(_.jsx)("input",{type:"text",onChange:M,name:"userName",value:S.userName,className:"form-control",placeholder:"user name",id:"username"})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"email",children:"Email"}),Object(_.jsx)("input",{type:"email",onChange:M,name:"email",value:S.email,className:"form-control",placeholder:"email",id:"email"})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"password",children:"Password"}),Object(_.jsx)("input",{type:"password",onChange:M,name:"password",value:S.password,className:"form-control",placeholder:"password",id:"password"})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),Object(_.jsx)("input",{type:"Password",onChange:M,name:"confirmPassword",value:S.confirmPassword,className:"form-control",placeholder:"confirm password",id:"confirmPassword"})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsxs)("div",{className:"file-image",children:[Object(_.jsx)("div",{className:"image",children:C?Object(_.jsx)("img",{alt:"Blank",src:C}):""}),Object(_.jsxs)("div",{className:"file",children:[Object(_.jsx)("label",{htmlFor:"image",children:"Select Image"}),Object(_.jsx)("input",{type:"file",onChange:function(e){0!==e.target.files.length&&E(Object(a.a)(Object(a.a)({},S),{},Object(d.a)({},e.target.name,e.target.files[0])));var s=new FileReader;s.onload=function(){k(s.result)},s.readAsDataURL(e.target.files[0])},name:"image",className:"form-control",id:"image"})]})]})}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("input",{type:"submit",value:"register",className:"btn"})}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("span",{children:Object(_.jsx)(i.b,{to:"/messenger/login",children:"Login Your Account"})})})]})})]})})},C=t(120),k=t(115),M=t(114),A=t(113),F=t(19),D=t.n(F),R=t(111),T=t(112),U=function(e){var s=e.friend,t=s.fndInfo,a=s.msgInfo,c=e.myId,n=e.activeUser;return Object(_.jsx)("div",{className:"friend",children:Object(_.jsxs)("label",{htmlFor:"friendCheckbox",children:[Object(_.jsx)("div",{className:"friend-image",children:Object(_.jsxs)("div",{className:"image",children:[Object(_.jsx)("img",{src:t.image,alt:""}),n&&n.length>0&&n.some((function(e){return e.userId===t._id}))?Object(_.jsx)("div",{className:"active_icon"}):""]})}),Object(_.jsxs)("div",{className:"friend-name-seen",children:[Object(_.jsxs)("div",{className:"friend-name",children:[Object(_.jsx)("h4",{className:(null===a||void 0===a?void 0:a.senderId)!==c&&void 0!==(null===a||void 0===a?void 0:a.status)&&"seen"!==(null===a||void 0===a?void 0:a.status)?"unseen_message Fd_name":"Fd_name",children:t.userName}),Object(_.jsxs)("div",{className:"msg-time",children:[a&&a.senderId===c?Object(_.jsx)("span",{children:"You "}):Object(_.jsxs)("span",{className:(null===a||void 0===a?void 0:a.senderId)!==c&&void 0!==(null===a||void 0===a?void 0:a.status)&&"seen"!==(null===a||void 0===a?void 0:a.status)?"unseen_message":"",children:[t.userName+""," "]}),a&&a.message.text?Object(_.jsxs)("span",{className:(null===a||void 0===a?void 0:a.senderId)!==c&&void 0!==(null===a||void 0===a?void 0:a.status)&&"seen"!==(null===a||void 0===a?void 0:a.status)?"unseen_message":"",children:[a.message.text.slice(0,10),". "]}):a&&a.message.image?Object(_.jsx)("span",{children:" send a image. "}):Object(_.jsx)("span",{children:" Registered "}),Object(_.jsx)("span",{children:a?D()(a.createdAt).startOf("mini").fromNow():D()(t.createdAt).startOf("mini").fromNow()})]})]}),c===(null===a||void 0===a?void 0:a.senderId)?Object(_.jsx)("div",{className:"seen-unseen-icon",children:"seen"===a.status?Object(_.jsx)("img",{src:t.image,alt:""}):"delivared"===a.status?Object(_.jsx)("div",{className:"delivared",children:Object(_.jsx)(R.a,{})}):Object(_.jsx)("div",{className:"unseen",children:Object(_.jsx)(T.a,{})})}):Object(_.jsx)("div",{className:"seen-unseen-icon",children:void 0!==(null===a||void 0===a?void 0:a.status)&&"seen"!==(null===a||void 0===a?void 0:a.status)?Object(_.jsx)("div",{className:"seen-icon"}):""})]})]})})},L=t(117),G=function(e){var s=e.currentfriend,t=e.activeUser,a=e.message;return Object(_.jsxs)("div",{className:"friend-info",children:[Object(_.jsx)("input",{type:"checkbox",id:"gallery"}),Object(_.jsxs)("div",{className:"image-name",children:[Object(_.jsx)("div",{className:"image",children:Object(_.jsx)("img",{src:s.image,alt:""})}),Object(_.jsx)("div",{className:"name",children:Object(_.jsx)("h4",{children:s.userName})}),t&&t.length>0&&t.some((function(e){return e.userId===s._id}))?Object(_.jsx)("div",{className:"active-user",children:" Active "}):Object(_.jsx)("div",{className:"active-user",children:" Offline "})]}),Object(_.jsxs)("div",{className:"others",children:[Object(_.jsx)("input",{type:"checkbox",id:"searchMessage"}),Object(_.jsx)("input",{type:"checkbox",id:"fDetils"}),Object(_.jsxs)("div",{className:"custom-chat",children:[Object(_.jsx)("label",{htmlFor:"fDetils",children:Object(_.jsx)("h3",{children:"Friend Detils "})}),Object(_.jsx)("label",{className:"arrowDown",htmlFor:"fDetils",children:Object(_.jsx)(A.b,{})})]}),Object(_.jsx)("div",{className:"dropDownFndInfo",children:Object(_.jsxs)("div",{className:"fDetils",children:[Object(_.jsxs)("div",{className:"fndDetils",children:["User Name : ",s.userName]})," ",Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"fndDetils",children:["Email : ",s.email]})," ",Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"fndDetils",children:["Registered : ",D()(s.createdAt).startOf("mini").fromNow()]})]})}),Object(_.jsxs)("div",{className:"privacy",children:[Object(_.jsx)("label",{htmlFor:"searchMessage",children:Object(_.jsx)("h3",{children:"Search Message "})}),Object(_.jsx)("label",{className:"arrowDown",htmlFor:"searchMessage",children:Object(_.jsx)(A.b,{})})]}),Object(_.jsx)("div",{className:"searchMessage",children:Object(_.jsxs)("div",{className:"search",children:[Object(_.jsx)("button",{children:Object(_.jsx)(M.a,{})}),Object(_.jsx)("input",{onChange:function(e){for(var s=document.getElementsByClassName("my-message"),t=document.getElementsByClassName("my-text"),a=0;s.length,a<t.length;a++){t[a].innerText.toLowerCase().indexOf(e.target.value.toLowerCase())>-1?s[a].style.display="":s[a].style.display="none"}var c=document.getElementsByClassName("fd-message"),n=document.getElementsByClassName("fd-text");for(a=0;c.length,a<n.length;a++){n[a].innerText.toLowerCase().indexOf(e.target.value.toLowerCase())>-1?c[a].style.display="":c[a].style.display="none"}},type:"text",placeholder:"search",className:"form-control"})]})}),Object(_.jsxs)("div",{className:"media",children:[Object(_.jsx)("label",{htmlFor:"gallery",children:Object(_.jsx)("h3",{children:"Shared Media "})}),Object(_.jsx)("label",{className:"arrowDown",htmlFor:"gallery",children:Object(_.jsx)(A.b,{})})]})]}),Object(_.jsx)("div",{className:"conversationImage",children:Object(_.jsx)("div",{className:"gallery",children:a&&a.length>0?a.map((function(e,s){return e.message.image&&Object(_.jsx)("img",{src:e.message.image,alt:""},s)})):""})})]})},P=function(e){var s=e.message,t=e.currentfriend,a=e.scrollRef,c=e.typingMessage,n=Object(N.c)((function(e){return e.auth})).myInfo;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"message-show",children:s&&s.length>0?s.map((function(e,c){return e.senderId===n.id?Object(_.jsxs)("div",{ref:a,className:"my-message",children:[Object(_.jsx)("div",{className:"image-message",children:Object(_.jsxs)("div",{className:"my-text",children:[Object(_.jsx)("p",{className:"message-text my",children:""===e.message.text?Object(_.jsx)("img",{src:e.message.image,alt:"image"}):e.message.text}),c===s.length-1&&e.senderId===n.id?"seen"===e.status?Object(_.jsx)("img",{className:"img",src:t.image,alt:""}):"delivared"===e.status?Object(_.jsx)("span",{children:Object(_.jsx)(R.a,{})}):Object(_.jsx)("span",{children:Object(_.jsx)(T.a,{})}):""]})}),Object(_.jsx)("div",{className:"time",children:D()(e.createdAt).startOf("mini").fromNow()})]},c):Object(_.jsx)("div",{ref:a,className:"fd-message",children:Object(_.jsxs)("div",{className:"image-message-time",children:[Object(_.jsx)("img",{src:t.image,alt:""}),Object(_.jsxs)("div",{className:"message-time",children:[Object(_.jsx)("div",{className:"fd-text",children:Object(_.jsx)("p",{className:"message-text fd",children:""===e.message.text?Object(_.jsx)("img",{src:e.message.image,alt:"image"}):e.message.text})}),Object(_.jsx)("div",{className:"time",children:D()(e.createdAt).startOf("mini").fromNow()})]})]})},c)})):Object(_.jsxs)("div",{className:"friend_connect",children:[Object(_.jsx)("img",{src:t.image,alt:""}),Object(_.jsxs)("h3",{children:[t.userName," Connected You"]}),Object(_.jsx)("span",{children:D()(t.createdAt).startOf("mini").fromNow()})]})}),c&&c.msg&&c.senderId===t._id?Object(_.jsx)("div",{className:"typing-message",children:Object(_.jsx)("div",{className:"fd-message",children:Object(_.jsxs)("div",{className:"image-message-time",children:[Object(_.jsx)("img",{src:t.image,alt:""}),Object(_.jsx)("div",{className:"message-time",children:Object(_.jsx)("div",{className:"fd-text",children:Object(_.jsx)("p",{className:"message-text",children:Object(_.jsxs)("div",{id:"wave",children:[Object(_.jsxs)("span",{class:"srfriendzone",children:[" ",t.userName," is typing "]}),Object(_.jsx)("span",{class:"dot one"}),Object(_.jsx)("span",{class:"dot two"}),Object(_.jsx)("span",{class:"dot three"})]})})})})]})})}):""]})},B=t(116),H=function(e){var s=e.inputHendle,t=e.newMessage,a=e.sendMessage,c=e.emojiSend,n=e.ImageSend;return Object(_.jsxs)("div",{className:"message-send-section",children:[Object(_.jsx)("input",{type:"checkbox",id:"emoji"}),Object(_.jsxs)("div",{className:"file hover-attachment",children:[Object(_.jsx)("div",{className:"add-attachment",children:"Add Attachment"}),Object(_.jsx)("input",{onChange:n,type:"file",id:"pic",className:"form-control"}),Object(_.jsx)("label",{htmlFor:"pic",children:Object(_.jsx)(A.f,{})})]}),Object(_.jsxs)("div",{className:"file hover-image",children:[Object(_.jsx)("div",{className:"add-image",children:"Add Image"}),Object(_.jsx)("input",{onChange:n,type:"file",id:"pic",className:"form-control"}),Object(_.jsx)("label",{htmlFor:"pic",children:Object(_.jsx)(R.b,{})})]}),Object(_.jsxs)("div",{className:"message-type",children:[Object(_.jsx)("input",{onChange:s,type:"text",name:"message",id:"message",placeholder:"Aa",value:t,className:"form-control"}),Object(_.jsx)("label",{htmlFor:"emoji",children:"\ud83d\ude42"})]}),Object(_.jsx)("div",{onClick:a,className:"file sentOrLike",children:Object(_.jsx)("label",{className:"sentOrLikeO",children:t?Object(_.jsx)(k.c,{}):Object(_.jsx)(B.a,{})})}),Object(_.jsx)("div",{className:"emoji-section",children:Object(_.jsx)("div",{className:"emoji",children:["\ud83d\ude00","\ud83d\ude03","\ud83d\ude04","\ud83d\ude01","\ud83d\ude06","\ud83d\ude05","\ud83d\ude02","\ud83e\udd23","\ud83d\ude0a","\ud83d\ude07","\ud83d\ude42","\ud83d\ude43","\ud83d\ude09","\ud83d\ude0c","\ud83d\ude0d","\ud83d\ude1d","\ud83d\ude1c","\ud83e\uddd0","\ud83e\udd13","\ud83d\ude0e","\ud83d\ude15","\ud83e\udd11","\ud83e\udd74","\ud83d\ude31","\ud83d\udc4b","\ud83c\udf89","\ud83d\udcda","\u2764\ufe0f"].map((function(e,s){return Object(_.jsx)("span",{onClick:function(){return c(e)},children:e},s)}))})})]})},V=function(e){var s=e.currentfriend,t=e.inputHendle,a=e.newMessage,c=e.sendMessage,n=e.message,r=e.scrollRef,i=e.emojiSend,l=e.ImageSend,d=e.activeUser,j=e.typingMessage;return Object(_.jsx)("div",{className:"col-9",children:Object(_.jsxs)("div",{className:"right-side",children:[Object(_.jsx)("input",{type:"checkbox",id:"dot"}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-8",children:Object(_.jsxs)("div",{className:"message-send-show",children:[Object(_.jsxs)("div",{className:"header",children:[Object(_.jsx)("label",{className:"backBtn",htmlFor:"friendCheckbox",children:Object(_.jsx)("div",{className:"backIcon",children:Object(_.jsx)(L.a,{})})}),Object(_.jsx)("label",{htmlFor:"dot",children:Object(_.jsxs)("div",{className:"image-name",children:[Object(_.jsxs)("div",{className:"image",children:[Object(_.jsx)("img",{src:s.image,alt:""}),d&&d.length>0&&d.some((function(e){return e.userId===s._id}))?Object(_.jsx)("div",{className:"active-icon"}):""]}),Object(_.jsxs)("div",{className:"name",children:[Object(_.jsxs)("h3",{children:[" ",s.userName," "]}),Object(_.jsx)("span",{children:d&&d.length>0&&d.some((function(e){return e.userId===s._id}))?"Active now":"Offline"})]})]})}),Object(_.jsxs)("div",{className:"icons",children:[Object(_.jsx)("div",{className:"icon hide",children:Object(_.jsx)(k.a,{})}),Object(_.jsx)("div",{className:"icon hide",children:Object(_.jsx)(A.a,{})}),Object(_.jsx)("div",{className:"icon",children:Object(_.jsx)("label",{htmlFor:"dot",children:Object(_.jsx)("div",{className:"hamburger",children:Object(_.jsxs)("div",{className:"menu",children:[Object(_.jsx)("div",{className:"bar1"}),Object(_.jsx)("div",{className:"bar2"}),Object(_.jsx)("div",{className:"bar3"})]})})})})]})]}),Object(_.jsx)(P,{currentfriend:s,scrollRef:r,message:n,typingMessage:j}),Object(_.jsx)(H,{ImageSend:l,emojiSend:i,sendMessage:c,inputHendle:t,newMessage:a,typingMessage:j})]})}),Object(_.jsx)("div",{className:"col-4",children:Object(_.jsx)(G,{message:n,currentfriend:s,activeUser:d})})]})]})})},z=t(67),W=t(51),Y="FRIENDS_GET_SUCCESS",J="MESSAGE_GET_SUCCESS",K="MESSAGE_SEND_SUCCESS",q=function(e){return function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.post("/api/messenger/seen-message",e);case 3:s.sent,s.next=9;break;case 6:s.prev=6,s.t0=s.catch(0),console.log(s.t0.response.message);case 9:case"end":return s.stop()}}),s,null,[[0,6]])})));return function(e){return s.apply(this,arguments)}}()},Q=function(e){return function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:localStorage.setItem("theme",e),t({type:"THEME_SET_SUCCESS",payload:{theme:e}});case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},X=t.p+"static/media/notification.a9597953.mp3",Z=t.p+"static/media/sending.aca82518.mp3",$=t.p+"static/media/logout.52f04a7e.mp3",ee=function(e){var s=e.user,t=e.setCurrentFriend;return Object(_.jsx)("div",{children:Object(_.jsx)("div",{onClick:function(){return t({_id:s.userInfo.id,email:s.userInfo.email,image:s.userInfo.image,userName:s.userInfo.userName})},className:"active-friend",children:Object(_.jsxs)("label",{htmlFor:"friendCheckbox",children:[Object(_.jsx)("div",{className:"image-active-icon",children:Object(_.jsxs)("div",{className:"image",children:[Object(_.jsx)("img",{src:s.userInfo.image,alt:""}),Object(_.jsx)("div",{className:"active-icon"})]})}),Object(_.jsx)("p",{children:s.userInfo.userName})]})})})},se=t(118),te=t(119),ae=function(e){var s=e.currentfriend;return Object(_.jsxs)("div",{className:"call-friend",children:[Object(_.jsx)("span",{className:"recents",children:" Recents "}),Object(_.jsxs)("label",{htmlFor:"/",children:[" ",Object(_.jsx)("div",{className:"image-call-icon",children:Object(_.jsx)("div",{className:"image",children:Object(_.jsx)("img",{src:s.image,alt:""})})}),Object(_.jsxs)("div",{className:"call-detils-conversation",children:[Object(_.jsxs)("div",{className:"call-detils",children:[Object(_.jsx)("h4",{children:s.userName}),Object(_.jsxs)("div",{className:"call-time",children:[Object(_.jsxs)("span",{children:[" ",Object(_.jsx)(se.a,{})," Incoming. "]}),Object(_.jsxs)("span",{children:[" ",D()(s.createdAt).startOf("mini").fromNow()," "]})]})]}),Object(_.jsx)("div",{className:"conversation",children:Object(_.jsx)(te.a,{})})]})]}),Object(_.jsxs)("label",{htmlFor:"/",children:[" ",Object(_.jsx)("div",{className:"image-call-icon",children:Object(_.jsx)("div",{className:"image",children:Object(_.jsx)("img",{src:s.image,alt:""})})}),Object(_.jsxs)("div",{className:"call-detils-conversation",children:[Object(_.jsxs)("div",{className:"call-detils",children:[Object(_.jsx)("h4",{children:s.userName}),Object(_.jsxs)("div",{className:"call-time",children:[Object(_.jsxs)("span",{children:[" ",Object(_.jsx)(se.c,{})," Outgoing. "]}),Object(_.jsxs)("span",{children:[" ",D()(s.createdAt).startOf("mini").fromNow()," "]})]})]}),Object(_.jsx)("div",{className:"conversation",children:Object(_.jsx)(te.a,{})})]})]}),Object(_.jsxs)("label",{htmlFor:"/",children:[" ",Object(_.jsx)("div",{className:"image-call-icon",children:Object(_.jsx)("div",{className:"image",children:Object(_.jsx)("img",{src:s.image,alt:""})})}),Object(_.jsxs)("div",{className:"call-detils-conversation",children:[Object(_.jsxs)("div",{className:"call-detils",children:[Object(_.jsx)("h4",{children:s.userName}),Object(_.jsxs)("div",{className:"call-time",children:[Object(_.jsxs)("span",{className:"missed",children:[" ",Object(_.jsx)(se.b,{})," Missed. "]}),Object(_.jsxs)("span",{children:[" ",D()(s.createdAt).startOf("mini").fromNow()," "]})]})]}),Object(_.jsx)("div",{className:"conversation",children:Object(_.jsx)(te.a,{})})]})]})]})},ce=function(){var e=Object(S.a)(X),s=Object(j.a)(e,1)[0],t=Object(S.a)(Z),a=Object(j.a)(t,1)[0],n=Object(S.a)($),r=Object(j.a)(n,1)[0],i=Object(N.c)((function(e){return e.auth})).myInfo,l=Object(N.c)((function(e){return e.messenger})),d=l.friends,b=l.message,h=l.messageSendSuccess,g=l.message_get_success,x=l.themeMood,f=l.new_user_add,v=Object(c.useState)(""),p=Object(j.a)(v,2),y=p[0],E=p[1],I=Object(c.useState)(""),w=Object(j.a)(I,2),F=w[0],D=w[1],R=Object(c.useState)(""),T=Object(j.a)(R,2),L=T[0],G=T[1],P=Object(c.useState)(""),B=Object(j.a)(P,2),H=B[0],se=B[1],te=Object(c.useState)([]),ce=Object(j.a)(te,2),ne=ce[0],re=ce[1],ie=Object(c.useRef)(),le=Object(c.useRef)();Object(c.useEffect)((function(){le.current=Object(z.a)(u,{withCredentials:!0,extraHeaders:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},transports:["websocket","polling","flashsocket"]}),le.current.on("getMessage",(function(e){G(e)})),le.current.on("typingMessageGet",(function(e){se(e)})),le.current.on("msgSeenResponse",(function(e){de({type:"SEEN_MESSAGE",payload:{msgInfo:e}})})),le.current.on("msgDelivaredResponse",(function(e){de({type:"DELIVARED_MESSAGE",payload:{msgInfo:e}})})),le.current.on("seenSuccess",(function(e){de({type:"SEEN_ALL",payload:e})}))}),[]),Object(c.useEffect)((function(){le.current.emit("addUser",i.id,i)}),[]),Object(c.useEffect)((function(){le.current.on("getUser",(function(e){var s=e.filter((function(e){return e.userId!==i.id}));re(s)})),le.current.on("new_user_add",(function(e){de({type:"NEW_USER_ADD",payload:{new_user_add:e}})}))}),[]),Object(c.useEffect)((function(){L&&y&&L.senderId===y._id&&L.reseverId===i.id&&(de({type:"SOCKET_MESSAGE",payload:{message:L}}),de(q(L)),le.current.emit("messageSeen",L),de({type:"UPDATE_FRIEND_MESSAGE",payload:{msgInfo:L,status:"seen"}})),G("")}),[L]),Object(c.useEffect)((function(){var e;L&&L.senderId!==y._id&&L.reseverId===i.id&&(s(),W.b.success("".concat(L.senderName," send a new message")),de((e=L,function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.post("/api/messenger/delivared-message",e);case 3:s.sent,s.next=9;break;case 6:s.prev=6,s.t0=s.catch(0),console.log(s.t0.response.message);case 9:case"end":return s.stop()}}),s,null,[[0,6]])})));return function(e){return s.apply(this,arguments)}}())),le.current.emit("delivaredMessage",L),de({type:"UPDATE_FRIEND_MESSAGE",payload:{msgInfo:L,status:"delivared"}}))}),[L]);var de=Object(N.b)();Object(c.useEffect)((function(){h&&(le.current.emit("sendMessage",b[b.length-1]),de({type:"UPDATE_FRIEND_MESSAGE",payload:{msgInfo:b[b.length-1]}}),de({type:"MESSAGE_SEND_SUCCESS_CLEAR"}))}),[h]),Object(c.useEffect)((function(){de(function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(O),e.prev=1,e.next=4,O.get("/api/messenger/get-friends");case 4:t=e.sent,s({type:Y,payload:{friends:t.data.friends}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(s){return e.apply(this,arguments)}}()),de({type:"NEW_USER_ADD_CLEAR"})}),[f]),Object(c.useEffect)((function(){var e;de((e=y._id,function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){var a;return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.get("/api/messenger/get-message/".concat(e));case 3:a=s.sent,t({type:J,payload:{message:a.data.message}}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log(s.t0.response.data);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e){return s.apply(this,arguments)}}()))}),[null===y||void 0===y?void 0:y._id]),Object(c.useEffect)((function(){b.length>0&&b[b.length-1].senderId!==i.id&&"seen"!==b[b.length-1].status&&(de({type:"UPDATE",payload:{id:y._id}}),le.current.emit("seen",{senderId:y._id,reseverId:i.id}),de(q({_id:b[b.length-1]._id}))),de({type:"MESSAGE_GET_SUCCESS_CLEAR"})}),[g]),Object(c.useEffect)((function(){var e;null===(e=ie.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[b]);var je=Object(c.useState)(!0),oe=Object(j.a)(je,2),me=oe[0],be=oe[1];Object(c.useEffect)((function(){de(function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("theme"),s({type:"THEME_GET_SUCCESS",payload:{theme:t||"white"}});case 2:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}())}),[]);return Object(_.jsxs)("div",{className:"dark"===x?"messenger themeDark":"black"===x?"messenger themeBlack":"messenger",children:[Object(_.jsx)(W.a,{position:"top-right",reverseOrder:!1,toastOptions:{style:{fontSize:"18px"}}}),Object(_.jsx)("input",{type:"checkbox",id:"friendCheckbox"}),Object(_.jsx)("input",{type:"radio",className:"tab-toggle",name:"tab-toggle",id:"tab1",defaultChecked:!0}),Object(_.jsx)("input",{type:"radio",className:"tab-toggle",name:"tab-toggle",id:"tab2"}),Object(_.jsx)("input",{type:"radio",className:"tab-toggle",name:"tab-toggle",id:"tab3"}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-3",children:Object(_.jsxs)("div",{className:"left-side",children:[Object(_.jsx)("input",{type:"checkbox",id:"showMyInfo"}),Object(_.jsxs)("div",{className:"MyInfo",children:[Object(_.jsx)("div",{className:"image",children:Object(_.jsx)("img",{src:i.image,alt:""})}),Object(_.jsxs)("div",{className:"myDetils",children:[Object(_.jsxs)("p",{children:[" ",i.userName]}),Object(_.jsxs)("p",{children:[" ",i.email.slice(0,20)]})]})]}),Object(_.jsxs)("div",{className:"top",children:[Object(_.jsxs)("label",{htmlFor:"showMyInfo",children:[Object(_.jsx)("div",{className:"chats",children:Object(_.jsx)("div",{className:"icons",children:Object(_.jsx)("div",{className:"icon",children:Object(_.jsxs)("div",{className:"menu",children:[Object(_.jsx)("div",{className:"bar1"}),Object(_.jsx)("div",{className:"bar2"}),Object(_.jsx)("div",{className:"bar3"})]})})})}),Object(_.jsxs)("div",{className:"image-name",children:[Object(_.jsx)("div",{className:"image",children:Object(_.jsx)("img",{src:i.image,alt:""})}),Object(_.jsx)("div",{className:"name",children:Object(_.jsx)("h3",{children:i.userName})}),Object(_.jsx)("span",{className:"chat-list",children:" Chats "}),Object(_.jsx)("span",{className:"call-list",children:" Calls "}),Object(_.jsx)("span",{className:"active-list",children:" People "})]})]}),Object(_.jsxs)("div",{className:"icons",children:[Object(_.jsx)("div",{className:"iconTwo",children:Object(_.jsx)("div",{onClick:function(){return be(!me)},className:"hamburger",children:Object(_.jsx)(C.a,{})})}),Object(_.jsx)("div",{className:"iconThree",children:Object(_.jsxs)("div",{onClick:function(){de(function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/messenger/user-logout");case 3:e.sent.data.success&&(localStorage.removeItem("authToken"),s({type:"LOGOUT_SUCCESS"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(s){return e.apply(this,arguments)}}()),le.current.emit("logout",i.id),r()},className:"logout",children:[Object(_.jsx)(k.b,{}),Object(_.jsx)("div",{className:"logoutHover",children:"Logout"})]})}),Object(_.jsx)("div",{className:me?"theme_logout":"theme_logout show",children:Object(_.jsxs)("div",{className:"theme_logout_body",children:[Object(_.jsx)("h3",{children:"Theme"}),Object(_.jsxs)("div",{className:"dark",children:[Object(_.jsx)("label",{htmlFor:"dark",children:" Dark "}),Object(_.jsx)("input",{onChange:function(e){return de(Q(e.target.value))},value:"dark",type:"radio",name:"theme",id:"dark"})]}),Object(_.jsxs)("div",{className:"black",children:[Object(_.jsx)("label",{htmlFor:"black",children:" Black "}),Object(_.jsx)("input",{onChange:function(e){return de(Q(e.target.value))},value:"black",type:"radio",name:"theme",id:"black"})]}),Object(_.jsxs)("div",{className:"light",children:[Object(_.jsx)("label",{htmlFor:"light",children:" Light "}),Object(_.jsx)("input",{onChange:function(e){return de(Q(e.target.value))},value:"light",type:"radio",name:"theme",id:"light"})]})]})})]})]}),Object(_.jsxs)("div",{className:"forCallTab",children:[Object(_.jsx)("div",{className:"tabOne",children:Object(_.jsxs)("div",{className:"friends",children:[Object(_.jsx)("div",{className:"friend-search",children:Object(_.jsxs)("div",{className:"search",children:[Object(_.jsx)("button",{children:Object(_.jsx)(M.a,{})}),Object(_.jsx)("input",{onChange:function(e){for(var s=document.getElementsByClassName("hover-friend"),t=document.getElementsByClassName("Fd_name"),a=0;s.length,a<t.length;a++){t[a].innerText.toLowerCase().indexOf(e.target.value.toLowerCase())>-1?s[a].style.display="":s[a].style.display="none"}},type:"text",placeholder:"search",className:"form-control"})]})}),ne&&ne.length>0?Object(_.jsx)("div",{className:"active-friends",children:ne.map((function(e,s){return Object(_.jsx)(ee,{setCurrentFriend:E,user:e},s)}))}):"",d&&d.length>0?d.map((function(e,s){return Object(_.jsx)("div",{onClick:function(){return E(e.fndInfo)},className:y._id===e.fndInfo._id?"hover-friend active":"hover-friend",children:Object(_.jsx)(U,{activeUser:ne,myId:i.id,friend:e})},s)})):Object(_.jsx)("div",{className:"firstViewFriends",children:"No friend yet ... "})]})}),Object(_.jsx)("div",{className:"tabTwo",children:Object(_.jsx)(ae,{currentfriend:y})}),Object(_.jsxs)("div",{className:"tabThree",children:[Object(_.jsx)("span",{className:"active-text",children:" Active now "}),Object(_.jsx)("div",{className:"friends",children:ne&&ne.length>0?Object(_.jsx)("div",{children:ne&&ne.length>0?Object(_.jsx)("div",{className:"active-friends",children:ne.map((function(e,s){return Object(_.jsx)(ee,{setCurrentFriend:E,user:e},s)}))}):""}):Object(_.jsx)("div",{className:"NoActiveFriend",children:"No active friend  ... "})})]})]}),Object(_.jsxs)("div",{className:"proparty",children:[Object(_.jsxs)("label",{className:"tab-trigger-one",htmlFor:"tab1",children:[Object(_.jsx)(A.d,{}),Object(_.jsx)("p",{children:"Chats"})]}),Object(_.jsxs)("label",{className:"tab-trigger-two",htmlFor:"tab2",children:[Object(_.jsx)(A.c,{}),Object(_.jsx)("p",{children:"Calls"})]}),Object(_.jsxs)("label",{className:"tab-trigger",htmlFor:"tab3",children:[Object(_.jsx)(A.e,{}),Object(_.jsx)("p",{children:"People"})]})]})]})}),y?Object(_.jsx)(V,{activeUser:ne,ImageSend:function(e){if(0!==e.target.files.length){a();var s=new FormData;s.append("senderName",i.userName),s.append("reseverId",y._id),s.append("image",e.target.files[0]),de((t=s,function(){var e=Object(m.a)(Object(o.a)().mark((function e(s){var a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/messenger/image-message-send",t);case 3:a=e.sent,s({type:K,payload:{message:a.data.message}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(s){return e.apply(this,arguments)}}()))}var t},currentfriend:y,inputHendle:function(e){D(e.target.value),le.current.emit("typingMessage",{senderId:i.id,reseverId:y._id,msg:e.target.value})},newMessage:F,sendMessage:function(e){e.preventDefault(),a();var s={senderName:i.userName,reseverId:y._id,message:F||"\ud83d\udc4d"};le.current.emit("typingMessage",{senderId:i.id,reseverId:y._id,msg:""}),de(function(e){return function(){var s=Object(m.a)(Object(o.a)().mark((function s(t){var a;return Object(o.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.post("/api/messenger/send-message",e);case 3:a=s.sent,t({type:K,payload:{message:a.data.message}}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log(s.t0.response.data);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e){return s.apply(this,arguments)}}()}(s)),D("")},message:b,scrollRef:ie,emojiSend:function(e){D("".concat(F)+e),le.current.emit("typingMessage",{senderId:i.id,reseverId:y._id,msg:e})},typingMessage:H}):d&&d.length>0?Object(_.jsx)("div",{className:"firstView",children:"Select a chat to start messaging"}):Object(_.jsx)("div",{className:"firstViewFriend",children:"No friend yet ... "})]})]})},ne=function(e){return Object(N.c)((function(e){return e.auth})).authenticate?Object(_.jsx)(l.b,{path:e.path,component:e.component,exact:e.exact}):Object(_.jsx)(l.a,{to:"/messenger/login"})};var re=function(){return Object(_.jsx)(i.a,{children:Object(_.jsxs)(l.d,{children:[Object(_.jsx)(l.b,{path:"/messenger/login",component:I,exact:!0}),Object(_.jsx)(l.b,{path:"/messenger/register",component:w,exact:!0}),Object(_.jsx)(ne,{path:"/",component:ce,exact:!0})]})})},ie=(t(105),t(106),function(e){e&&e instanceof Function&&t.e(4).then(t.bind(null,121)).then((function(s){var t=s.getCLS,a=s.getFID,c=s.getFCP,n=s.getLCP,r=s.getTTFB;t(e),a(e),c(e),n(e),r(e)}))}),le=t(42),de=t(64),je=t(65),oe={loading:!0,authenticate:!1,error:"",successMessage:"",myInfo:""},me=function(e){var s=Object(je.a)(e),t=new Date(1e3*s.exp);return new Date>t?null:s},be=localStorage.getItem("authToken");if(be){var ue=me(be);ue&&(oe.myInfo=ue,oe.authenticate=!0,oe.loading=!1)}var Oe=t(50),he={friends:[],message:[],messageSendSuccess:!1,message_get_success:!1,themeMood:"",new_user_add:""},ge=Object(le.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,s=arguments.length>1?arguments[1]:void 0,t=s.payload,c=s.type;if(c===h||c===v)return Object(a.a)(Object(a.a)({},e),{},{error:t.error,authenticate:!1,myInfo:"",loading:!0});if(c===g||c===p){var n=me(t.token);return Object(a.a)(Object(a.a)({},e),{},{myInfo:n,successMessage:t.successMessage,error:"",authenticate:!0,loading:!1})}return c===x?Object(a.a)(Object(a.a)({},e),{},{successMessage:""}):c===f?Object(a.a)(Object(a.a)({},e),{},{error:""}):"LOGOUT_SUCCESS"===c?Object(a.a)(Object(a.a)({},e),{},{authenticate:!1,myInfo:"",successMessage:"Logout successfull"}):e},messenger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,s=arguments.length>1?arguments[1]:void 0,t=s.type,c=s.payload;if("THEME_GET_SUCCESS"===t||"THEME_SET_SUCCESS"===t)return Object(a.a)(Object(a.a)({},e),{},{themeMood:c.theme});if(t===Y)return Object(a.a)(Object(a.a)({},e),{},{friends:c.friends});if(t===J)return Object(a.a)(Object(a.a)({},e),{},{message_get_success:!0,message:c.message});if(t===K)return Object(a.a)(Object(a.a)({},e),{},{messageSendSuccess:!0,message:[].concat(Object(Oe.a)(e.message),[c.message])});if("SOCKET_MESSAGE"===t)return Object(a.a)(Object(a.a)({},e),{},{message:[].concat(Object(Oe.a)(e.message),[c.message])});if("UPDATE_FRIEND_MESSAGE"===t){var n=e.friends.findIndex((function(e){return e.fndInfo._id===c.msgInfo.reseverId||e.fndInfo._id===c.msgInfo.senderId}));return e.friends[n].msgInfo=c.msgInfo,e.friends[n].msgInfo.status=c.status,e}if("MESSAGE_SEND_SUCCESS_CLEAR"===t)return Object(a.a)(Object(a.a)({},e),{},{messageSendSuccess:!1});if("SEEN_MESSAGE"===t){var r=e.friends.findIndex((function(e){return e.fndInfo._id===c.msgInfo.reseverId||e.fndInfo._id===c.msgInfo.senderId}));return e.friends[r].msgInfo.status="seen",Object(a.a)({},e)}if("DELIVARED_MESSAGE"===t){var i=e.friends.findIndex((function(e){return e.fndInfo._id===c.msgInfo.reseverId||e.fndInfo._id===c.msgInfo.senderId}));return e.friends[i].msgInfo.status="delivared",Object(a.a)({},e)}if("UPDATE"===t){var l=e.friends.findIndex((function(e){return e.fndInfo._id===c.id}));return e.friends[l].msgInfo&&(e.friends[l].msgInfo.status="seen"),Object(a.a)({},e)}if("MESSAGE_GET_SUCCESS_CLEAR"===t)return Object(a.a)(Object(a.a)({},e),{},{message_get_success:!1});if("SEEN_ALL"===t){var d=e.friends.findIndex((function(e){return e.fndInfo._id===c.reseverId}));return e.friends[d].msgInfo.status="seen",Object(a.a)({},e)}return"LOGOUT_SUCCESS"===t?Object(a.a)(Object(a.a)({},e),{},{friends:[],message:[],messageSendSuccess:!1,message_get_success:!1}):"NEW_USER_ADD"===t?Object(a.a)(Object(a.a)({},e),{},{new_user_add:c.new_user_add}):"NEW_USER_ADD_CLEAR"===t?Object(a.a)(Object(a.a)({},e),{},{new_user_add:""}):e}}),xe=[de.a],fe=Object(le.d)(ge,Object(le.c)(le.a.apply(void 0,xe))),ve=t(66),pe={timeout:5e3,positions:y.b.BOTTOM_CENTER,transitions:y.c.SCALE};r.a.render(Object(_.jsx)(N.a,{store:fe,children:Object(_.jsx)(y.a,Object(a.a)(Object(a.a)({template:ve.a},pe),{},{children:Object(_.jsx)(re,{})}))}),document.getElementById("root")),ie()},72:function(e,s,t){}},[[107,1,2]]]);
//# sourceMappingURL=main.5c449c92.chunk.js.map